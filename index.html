<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Infografis Pajak BUMDes Peternakan - Kabupaten Sragen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F3F4F6;
            color: #1F2937;
        }

        /* Chart Container Styling - MANDATORY COMPLIANCE */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }

        /* Custom Utilities for Diagrams (NO SVG) */
        .step-arrow::after {
            content: '‚ñº';
            font-size: 1.5rem;
            color: #D97706;
            display: block;
            margin-top: 0.5rem;
            text-align: center;
        }
        
        @media (min-width: 768px) {
            .step-arrow::after {
                content: '‚ñ∂';
                display: inline-block;
                margin-top: 0;
                margin-left: 1rem;
            }
        }

        .no-arrow::after {
            content: none !important;
        }
    </style>
    <!-- 
        SOURCE MATERIAL ANALYSIS & PLAN:
        1. Topic: Tax obligations for Village-Owned Enterprises (BUMDes) in livestock sector, Sragen.
        2. Narrative: Introduction -> Legal Basis -> Tax Types (Visualized) -> Calculation Simulation -> Compliance Timeline -> Local Sragen Context.
        3. Visualizations:
           - Donut Chart: Breakdown of tax types (PPh 21, Final, PPN, Local). Goal: Inform/Compare.
           - Flow Diagram (HTML/CSS): The Tax Journey. Goal: Process.
           - Bar Chart: Monthly Revenue vs. 0.5% Tax Simulation. Goal: Compare/Change.
           - Horizontal Bar: Thresholds for PKP status (4.8B IDR). Goal: Compare.
           - Timeline (HTML/CSS): Payment deadlines. Goal: Organize.
        4. Constraints: NO SVG, NO Mermaid. All charts via Chart.js with text wrapping logic.
        5. Palette: Deep Indigo (#4338CA), Amber (#D97706), Emerald (#059669).
        
        CONFIRMATION: NEITHER Mermaid JS NOR SVG were used anywhere in this output.
    -->
</head>
<body class="antialiased">

    <!-- HERO SECTION -->
    <header class="bg-indigo-700 text-white pt-12 pb-20 px-4 shadow-xl relative overflow-hidden">
        <div class="max-w-5xl mx-auto text-center relative z-10">
            <div class="inline-block bg-amber-500 text-indigo-900 font-bold px-4 py-1 rounded-full mb-4 text-sm uppercase tracking-wide shadow-md">
                Panduan Perpajakan Daerah
            </div>
            <h1 class="text-4xl md:text-6xl font-extrabold mb-4 leading-tight">
                Pajak BUMDes Peternakan<br><span class="text-amber-400">Kabupaten Sragen</span>
            </h1>
            <p class="text-xl md:text-2xl text-indigo-100 max-w-3xl mx-auto font-light">
                Memahami kewajiban perpajakan pusat dan daerah untuk mewujudkan tata kelola usaha desa yang transparan dan akuntabel.
            </p>
        </div>
        <!-- Decorative Background Element (CSS Only) -->
        <div class="absolute top-0 left-0 w-full h-full opacity-10 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-white via-transparent to-transparent"></div>
    </header>

    <main class="max-w-6xl mx-auto px-4 -mt-10 mb-20 relative z-20">

        <!-- INTRO CARD -->
        <section class="bg-white rounded-2xl shadow-lg p-8 mb-12 border-t-8 border-amber-500">
            <h2 class="text-3xl font-bold text-indigo-900 mb-4">Mengapa BUMDes Kena Pajak?</h2>
            <p class="text-lg text-gray-700 leading-relaxed mb-6">
                Badan Usaha Milik Desa (BUMDes) adalah <strong>Badan Hukum</strong> yang terpisah kekayaannya dari Pemerintah Desa. Ketika BUMDes di Kabupaten Sragen menjalankan unit usaha peternakan (penggemukan sapi, ayam petelur, atau pengolahan pakan), BUMDes menjadi <strong>Subjek Pajak</strong> yang wajib memiliki NPWP dan memenuhi kewajiban perpajakan sesuai UU Harmonisasi Peraturan Perpajakan (HPP).
            </p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100">
                    <div class="text-4xl mb-2">üè¢</div>
                    <h3 class="font-bold text-indigo-800">Entitas Terpisah</h3>
                    <p class="text-sm text-gray-600">Bukan Bendahara Desa, tapi Badan Usaha.</p>
                </div>
                <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100">
                    <div class="text-4xl mb-2">üìù</div>
                    <h3 class="font-bold text-indigo-800">Wajib NPWP</h3>
                    <p class="text-sm text-gray-600">Identitas wajib pajak badan usaha.</p>
                </div>
                <div class="bg-indigo-50 p-4 rounded-xl border border-indigo-100">
                    <div class="text-4xl mb-2">ü§ù</div>
                    <h3 class="font-bold text-indigo-800">Kontribusi Daerah</h3>
                    <p class="text-sm text-gray-600">Membangun Sragen lewat PAD & Pajak Pusat.</p>
                </div>
            </div>
        </section>

        <!-- VISUALIZATION 1: TAX TYPES DONUT CHART -->
        <section class="mb-16">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-10 items-center">
                <div>
                    <h2 class="text-3xl font-bold text-gray-800 mb-4 border-l-4 border-indigo-600 pl-4">Jenis Pajak Utama</h2>
                    <p class="text-gray-600 mb-6">
                        BUMDes Peternakan memiliki kewajiban pajak yang beragam. Chart ini menggambarkan proporsi jenis pajak yang umum dibayarkan. PPh Final UMKM seringkali menjadi porsi terbesar bagi BUMDes pemula dengan omzet di bawah 4,8 Milyar.
                    </p>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <span class="text-indigo-600 font-bold mr-2 text-xl">‚Ä¢</span>
                            <span><strong>PPh Final UMKM (0.5%):</strong> Dikenakan pada omzet bruto bulanan.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-amber-600 font-bold mr-2 text-xl">‚Ä¢</span>
                            <span><strong>PPh 21 (Gaji Pegawai):</strong> Pajak atas gaji pengelola & pegawai kandang.</span>
                        </li>
                        <li class="flex items-start">
                            <span class="text-emerald-600 font-bold mr-2 text-xl">‚Ä¢</span>
                            <span><strong>Pajak Daerah (Sragen):</strong> Termasuk PBB kandang & Pajak Air Tanah.</span>
                        </li>
                    </ul>
                </div>
                
                <!-- Chart Container 1 -->
                <div class="bg-white p-6 rounded-xl shadow-md border border-gray-100">
                    <h3 class="text-center font-bold text-gray-500 mb-4 text-sm uppercase">Komposisi Kewajiban Pajak (Estimasi)</h3>
                    <div class="chart-container">
                        <canvas id="taxTypesChart"></canvas>
                    </div>
                    <p class="text-center text-xs text-gray-400 mt-2 italic">Data ilustratif proporsi beban administrasi pajak</p>
                </div>
            </div>
            <!-- Choice Justification: Donut Chart used to show composition. Chart.js used. NO SVG. -->
        </section>

        <!-- DIAGRAM: THE TAX JOURNEY (HTML/CSS) -->
        <section class="bg-indigo-900 text-white rounded-2xl p-8 mb-16 shadow-2xl">
            <h2 class="text-3xl font-bold mb-8 text-center">Alur Kepatuhan Pajak BUMDes</h2>
            <div class="flex flex-col md:flex-row justify-between items-center space-y-8 md:space-y-0 relative">
                
                <!-- Step 1 -->
                <div class="flex flex-col items-center w-full md:w-1/4 step-arrow">
                    <div class="w-16 h-16 bg-amber-500 rounded-full flex items-center justify-center text-3xl shadow-lg z-10 mb-4">
                        üìù
                    </div>
                    <h3 class="font-bold text-lg">1. Daftar</h3>
                    <p class="text-center text-indigo-200 text-sm px-4">Membuat NPWP Badan di KPP Pratama Sragen.</p>
                </div>

                <!-- Step 2 -->
                <div class="flex flex-col items-center w-full md:w-1/4 step-arrow">
                    <div class="w-16 h-16 bg-amber-500 rounded-full flex items-center justify-center text-3xl shadow-lg z-10 mb-4">
                        üßÆ
                    </div>
                    <h3 class="font-bold text-lg">2. Hitung</h3>
                    <p class="text-center text-indigo-200 text-sm px-4">Rekap omzet bulanan & hitung 0.5% (Tarif UMKM).</p>
                </div>

                <!-- Step 3 -->
                <div class="flex flex-col items-center w-full md:w-1/4 step-arrow">
                    <div class="w-16 h-16 bg-amber-500 rounded-full flex items-center justify-center text-3xl shadow-lg z-10 mb-4">
                        üí∏
                    </div>
                    <h3 class="font-bold text-lg">3. Bayar</h3>
                    <p class="text-center text-indigo-200 text-sm px-4">Setor via Bank/Pos dengan Kode Billing (ID Billing).</p>
                </div>

                <!-- Step 4 -->
                <div class="flex flex-col items-center w-full md:w-1/4 no-arrow">
                    <div class="w-16 h-16 bg-emerald-500 rounded-full flex items-center justify-center text-3xl shadow-lg z-10 mb-4">
                        ‚úÖ
                    </div>
                    <h3 class="font-bold text-lg">4. Lapor</h3>
                    <p class="text-center text-indigo-200 text-sm px-4">Lapor SPT Tahunan (Badan) setiap bulan April.</p>
                </div>

            </div>
            <!-- Choice Justification: Process Flow implemented with Flexbox/HTML to avoid SVG/Mermaid. -->
        </section>

        <!-- VISUALIZATION 2: SIMULATION BAR CHART -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 border-l-4 border-amber-500 pl-4">Simulasi Perhitungan PPh Final 0.5%</h2>
            <p class="text-gray-600 mb-8 max-w-4xl">
                Bagi BUMDes dengan omzet bruto di bawah Rp 4,8 Milyar setahun, Pemerintah memberikan kemudahan tarif PPh Final 0,5% (PP 55 Tahun 2022). Berikut adalah simulasi perhitungan pajak bulanan berdasarkan fluktuasi penjualan hasil ternak (susu, daging, atau pupuk).
            </p>

            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                <div class="chart-container md:max-w-4xl mx-auto">
                    <canvas id="simulationChart"></canvas>
                </div>
                <div class="mt-6 bg-yellow-50 border-l-4 border-yellow-400 p-4 text-sm text-yellow-800">
                    <strong>Catatan Penting:</strong> Jika BUMDes merugi, PPh Final 0,5% tetap harus dibayar dari omzet. Jika memilih tarif umum (Pasal 17), pajak dibayar hanya jika ada laba bersih.
                </div>
            </div>
            <!-- Choice Justification: Bar Chart to compare monthly changes. Chart.js used. -->
        </section>

        <!-- SECTION: LOCAL TAXES (SRAGEN CONTEXT) -->
        <section class="mb-16">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Kewajiban Pajak Daerah (Kab. Sragen)</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8">
                
                <!-- Card 1 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300">
                    <div class="bg-indigo-600 h-2 w-full"></div>
                    <div class="p-6">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">üíß</span>
                            <h3 class="text-xl font-bold text-gray-800">Pajak Air Tanah</h3>
                        </div>
                        <p class="text-gray-600 text-sm mb-4">
                            Jika peternakan menggunakan sumur bor dalam (bukan PDAM) untuk kebutuhan minum ternak atau pembersihan kandang.
                        </p>
                        <div class="bg-gray-100 p-3 rounded text-xs text-gray-500 font-mono">
                            Dibayarkan ke: BPPKAD Sragen
                        </div>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="bg-white rounded-xl shadow-md overflow-hidden hover:shadow-xl transition-shadow duration-300">
                    <div class="bg-emerald-600 h-2 w-full"></div>
                    <div class="p-6">
                        <div class="flex items-center mb-4">
                            <span class="text-3xl mr-4">üèûÔ∏è</span>
                            <h3 class="text-xl font-bold text-gray-800">PBB-P2</h3>
                        </div>
                        <p class="text-gray-600 text-sm mb-4">
                            Pajak Bumi dan Bangunan Perdesaan & Perkotaan atas lahan kandang dan kantor BUMDes.
                        </p>
                        <div class="bg-gray-100 p-3 rounded text-xs text-gray-500 font-mono">
                            Jatuh Tempo: Biasanya September
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- VISUALIZATION 3: PPN THRESHOLDS -->
        <section class="mb-16">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="md:col-span-1">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4">Kapan Wajib PPN?</h2>
                    <p class="text-gray-600 text-sm mb-4">
                        BUMDes wajib menjadi <strong>Pengusaha Kena Pajak (PKP)</strong> dan memungut PPN 11% jika omzet tahunan melebihi ambang batas (Threshold).
                    </p>
                    <div class="bg-indigo-100 p-4 rounded-lg">
                        <p class="text-indigo-800 font-bold text-lg mb-1">Rp 4.8 Milyar</p>
                        <p class="text-indigo-600 text-xs">Batas Omzet Setahun</p>
                    </div>
                    <p class="text-gray-500 text-xs mt-4">
                        *Ternak hidup termasuk barang strategis yang dibebaskan PPN, namun produk olahan (sosis, nugget) tetap kena PPN.
                    </p>
                </div>
                <div class="md:col-span-2 bg-white p-6 rounded-xl shadow-md">
                    <div class="chart-container">
                        <canvas id="thresholdChart"></canvas>
                    </div>
                </div>
            </div>
             <!-- Choice Justification: Horizontal Bar Chart for comparison. Chart.js used. -->
        </section>

        <!-- TIMELINE SECTION -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold text-center text-gray-800 mb-10">Kalender Kepatuhan Pajak</h2>
            <div class="relative">
                <!-- Vertical Line -->
                <div class="border-l-4 border-indigo-200 absolute h-full left-1/2 transform -translate-x-1/2 hidden md:block"></div>
                
                <div class="space-y-8">
                    <!-- Item 1 -->
                    <div class="flex flex-col md:flex-row items-center justify-between">
                        <div class="w-full md:w-5/12 text-center md:text-right pr-0 md:pr-8 mb-4 md:mb-0">
                            <h3 class="font-bold text-indigo-700 text-xl">Tanggal 10</h3>
                            <p class="text-gray-600">Batas Setor PPh Pasal 21</p>
                            <span class="text-xs text-gray-400">Pajak Gaji Pegawai</span>
                        </div>
                        <div class="w-8 h-8 bg-amber-500 rounded-full z-10 border-4 border-white shadow"></div>
                        <div class="w-full md:w-5/12 pl-0 md:pl-8 text-center md:text-left mt-4 md:mt-0 hidden md:block"></div>
                    </div>

                    <!-- Item 2 -->
                    <div class="flex flex-col md:flex-row items-center justify-between">
                        <div class="w-full md:w-5/12 pr-8 hidden md:block"></div>
                        <div class="w-8 h-8 bg-amber-500 rounded-full z-10 border-4 border-white shadow"></div>
                        <div class="w-full md:w-5/12 text-center md:text-left pl-0 md:pl-8 mt-4 md:mt-0">
                            <h3 class="font-bold text-indigo-700 text-xl">Tanggal 15</h3>
                            <p class="text-gray-600">Batas Setor PPh Final 0.5%</p>
                            <span class="text-xs text-gray-400">Masa Pajak Bulan Lalu</span>
                        </div>
                    </div>

                    <!-- Item 3 -->
                    <div class="flex flex-col md:flex-row items-center justify-between">
                        <div class="w-full md:w-5/12 text-center md:text-right pr-0 md:pr-8 mb-4 md:mb-0">
                            <h3 class="font-bold text-indigo-700 text-xl">Akhir Bulan</h3>
                            <p class="text-gray-600">Batas Setor & Lapor PPN</p>
                            <span class="text-xs text-gray-400">Jika sudah PKP</span>
                        </div>
                        <div class="w-8 h-8 bg-amber-500 rounded-full z-10 border-4 border-white shadow"></div>
                        <div class="w-full md:w-5/12 pl-8 hidden md:block"></div>
                    </div>

                     <!-- Item 4 -->
                     <div class="flex flex-col md:flex-row items-center justify-between">
                        <div class="w-full md:w-5/12 pr-8 hidden md:block"></div>
                        <div class="w-8 h-8 bg-emerald-500 rounded-full z-10 border-4 border-white shadow"></div>
                        <div class="w-full md:w-5/12 text-center md:text-left pl-0 md:pl-8 mt-4 md:mt-0">
                            <h3 class="font-bold text-emerald-700 text-xl">30 April</h3>
                            <p class="text-gray-600">Lapor SPT Tahunan Badan</p>
                            <span class="text-xs text-gray-400">Wajib Lapor Meski Nihil</span>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Choice Justification: Timeline using structured HTML/CSS (Tailwind) to avoid SVG. -->
        </section>

    </main>

    <footer class="bg-gray-800 text-gray-400 py-8 text-center border-t-4 border-amber-500">
        <div class="max-w-4xl mx-auto px-4">
            <p class="mb-2 font-bold text-white">Infografis Perpajakan Desa</p>
            <p class="text-sm">Disusun Oleh Zahra Annisa Riany dan TIM KKN Desa Pagak.</p>
            <p class="text-xs mt-4 opacity-50">Referensi: UU HPP, PP 55/2022, Perda Kab. Sragen terkait Pajak Daerah.</p>
        </div>
    </footer>

    <!-- CHART.JS LOGIC -->
    <script>
        // --- 1. UTILITY: Label Splitting Logic (16 char limit) ---
        function formatLabel(str, maxwidth) {
            if (typeof str !== 'string') return str;
            if (str.length <= maxwidth) return str;
            
            const words = str.split(' ');
            const lines = [];
            let currentLine = words[0];

            for (let i = 1; i < words.length; i++) {
                if (currentLine.length + 1 + words[i].length <= maxwidth) {
                    currentLine += " " + words[i];
                } else {
                    lines.push(currentLine);
                    currentLine = words[i];
                }
            }
            lines.push(currentLine);
            return lines;
        }

        // --- 2. GLOBAL CHART CONFIG ---
        Chart.defaults.font.family = "'Inter', sans-serif";
        Chart.defaults.color = '#374151';
        
        // Custom Tooltip Callback for Multi-line Labels
        const tooltipPlugin = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        // --- 3. CHART 1: TAX TYPES (DONUT) ---
        const ctxTaxTypes = document.getElementById('taxTypesChart').getContext('2d');
        // Raw labels
        const rawLabelsTypes = [
            'PPh Final UMKM (0.5% dari Omzet)', 
            'PPh 21 (Potongan Gaji Pegawai)', 
            'Pajak Daerah (Air Tanah/PBB)', 
            'Biaya Admin & Lainnya'
        ];
        // Apply formatting
        const formattedLabelsTypes = rawLabelsTypes.map(l => formatLabel(l, 20)); // slightly larger limit for donut

        new Chart(ctxTaxTypes, {
            type: 'doughnut',
            data: {
                labels: formattedLabelsTypes,
                datasets: [{
                    data: [45, 25, 20, 10], // Dummy percentage data
                    backgroundColor: [
                        '#4338CA', // Indigo-700
                        '#D97706', // Amber-600
                        '#059669', // Emerald-600
                        '#9CA3AF'  // Gray-400
                    ],
                    borderWidth: 0,
                    hoverOffset: 10
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true,
                            padding: 20
                        }
                    },
                    tooltip: tooltipPlugin
                }
            }
        });

        // --- 4. CHART 2: SIMULATION (BAR) ---
        const ctxSim = document.getElementById('simulationChart').getContext('2d');
        
        new Chart(ctxSim, {
            type: 'bar',
            data: {
                labels: ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni'],
                datasets: [
                    {
                        label: 'Omzet Bruto (Juta Rupiah)',
                        data: [50, 65, 40, 80, 55, 90], // Revenue
                        backgroundColor: '#E0E7FF', // Indigo-100
                        borderColor: '#4338CA', // Indigo-700
                        borderWidth: 1,
                        yAxisID: 'y'
                    },
                    {
                        label: 'Pajak PPh Final (Ribuan Rupiah)',
                        data: [250, 325, 200, 400, 275, 450], // Tax (0.5% * 1000 multiplier adjustment for visual)
                        backgroundColor: '#F59E0B', // Amber-500
                        yAxisID: 'y1'
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: tooltipPlugin,
                    title: {
                        display: true,
                        text: 'Omzet vs Kewajiban Pajak (Rp)'
                    }
                },
                scales: {
                    y: {
                        type: 'linear',
                        display: true,
                        position: 'left',
                        title: { display: true, text: 'Omzet (Juta Rp)' }
                    },
                    y1: {
                        type: 'linear',
                        display: true,
                        position: 'right',
                        grid: { drawOnChartArea: false },
                        title: { display: true, text: 'Pajak Bayar (Ribu Rp)' }
                    }
                }
            }
        });

        // --- 5. CHART 3: THRESHOLDS (HORIZONTAL BAR) ---
        const ctxThresh = document.getElementById('thresholdChart').getContext('2d');
        const rawLabelsThresh = [
            'BUMDes Mikro (Non-PKP)',
            'Batas Wajib PKP (PPN)'
        ];
        const formattedLabelsThresh = rawLabelsThresh.map(l => formatLabel(l, 16));

        new Chart(ctxThresh, {
            type: 'bar',
            data: {
                labels: formattedLabelsThresh,
                datasets: [{
                    label: 'Omzet Tahunan (Milyar Rp)',
                    data: [1.2, 4.8],
                    backgroundColor: [
                        '#10B981', // Emerald-500 (Safe)
                        '#EF4444'  // Red-500 (Warning)
                    ],
                    borderRadius: 5
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    tooltip: tooltipPlugin,
                    legend: { display: false }
                },
                scales: {
                    x: {
                        beginAtZero: true,
                        max: 6
                    }
                }
            }
        });
    </script>
</body>
</html>